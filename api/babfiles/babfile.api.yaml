includes:
  db:
    babfile: ./babfile.typeorm.yaml
  email:
    babfile: ./babfile.email.yaml

dir: ..

tasks:
  dev:
    desc: Start development server with watch mode
    run:
      - cmd: pnpm start:dev

  start:
    desc: Start the server
    run:
      - cmd: pnpm start

  start:debug:
    desc: Start with debug mode
    run:
      - cmd: pnpm start:debug

  start:prod:
    desc: Start production server
    run:
      - cmd: pnpm start:prod

  build:
    desc: Build the project
    run:
      - cmd: pnpm build

  lint:fix:
    desc: Lint and fix code
    run:
      - cmd: pnpm lint:fix

  lint:
    desc: Lint code
    run:
      - cmd: pnpm lint

  format:
    desc: Format code with Prettier
    run:
      - cmd: pnpm format

  format:check:
    desc: Check code formatting
    run:
      - cmd: pnpm format:check

  typecheck:
    desc: Type check code
    run:
      - cmd: pnpm typecheck

  test:
    desc: Run tests
    run:
      - cmd: pnpm test

  test:watch:
    desc: Run tests in watch mode
    run:
      - cmd: pnpm test:watch

  test:coverage:
    desc: Run tests with coverage
    run:
      - cmd: pnpm test:cov

  test:e2e:
    desc: Run e2e tests
    run:
      - cmd: pnpm test:e2e

  check:
    desc: Pre-commit check (fix and verify)
    run:
      - cmd: pnpm format
      - cmd: pnpm eslint "{src,apps,libs,test}/**/*.ts" --fix --max-warnings 0
      - cmd: pnpm typecheck
      - log: All checks passed
        level: info
