includes:
  api:
    babfile: ./api/babfiles/babfile.api.yaml

tasks:
  docker:up:
    desc: Start all services
    run:
      - cmd: docker compose up -d

  docker:up:build:
    desc: Build and start all services
    run:
      - cmd: docker compose up -d --build

  docker:down:
    desc: Stop all services
    run:
      - cmd: docker compose down

  docker:down:clean:
    desc: Stop all services and remove volumes
    run:
      - prompt: confirm
        type: confirm
        message: "This will remove all data. Continue?"
        default: false
      - cmd: docker compose down -v

  docker:logs:
    desc: Show logs from all services
    run:
      - cmd: docker compose logs -f

  docker:logs:api:
    desc: Show logs from API service
    run:
      - cmd: docker compose logs -f api

  docker:logs:db:
    desc: Show logs from PostgreSQL service
    run:
      - cmd: docker compose logs -f postgres

  docker:ps:
    desc: Show running services
    run:
      - cmd: docker compose ps

  docker:restart:
    desc: Restart all services
    run:
      - cmd: docker compose restart

  docker:rebuild:
    desc: Rebuild and restart API service
    run:
      - cmd: docker compose up -d --build api
